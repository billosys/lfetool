#!/bin/sh

CWD=$(pwd)
SCRIPT_PATH=$(readlink $0)
BIN_DIR=$(dirname $SCRIPT_PATH)
BASE_DIR=$(dirname $BIN_DIR)

cd $BASE_DIR && ERL_LIBS=$(lfetool info erllibs):~/.lfetool:. \
erl \
    -cwd "$CWD" \
    -s lfetool \
    -eval "case lfetool:eval(\"$*\") of
             {ok, Result} ->
               io:format(\"~p~n\", [Result]),
               halt(0);
             _ -> halt(127)
           end" \
    -noshell
